import{m as F,q as H,s as _}from"./chunk-EULEIPYM.js";import{$ as T,$a as O,Bb as X,Da as m,Jb as B,Ka as D,Mb as A,N as C,O as E,Q as U,Qa as h,R,Ra as z,S as l,a as o,aa as j,ab as p,b as L,bb as f,ea as c,fb as S,gb as w,hb as M,ib as b,jb as v,ka as I,kb as u,wb as k,xb as x,yb as $,zb as P}from"./chunk-MBBX7UB6.js";var y=class a{constructor(e){this.logger=e;this.config=this.getConfig(),this.logger.debugLog("Data service initialized",{environment:window.location.href.includes("localhost")?"localhost":"production",siteUrl:this.config.siteUrl,apiPath:this.config.apiPath})}config;getConfig(){return window.location.href.includes("localhost")?(this.logger.debugLog("Running in localhost development mode"),{siteUrl:"http://localhost:3000",apiPath:""}):(this.logger.debugLog("Running in production SharePoint mode"),{siteUrl:"https://collab.napma.nato.int/grc",apiPath:"/_api/web"})}cacheState=c({isInitialized:!1,lastUpdated:null,initializationError:null},{});risksState=c({isLoaded:!1,lastUpdated:null,error:null},{});objectivesState=c({isLoaded:!1,lastUpdated:null,error:null},{});criticalAssetsState=c({isLoaded:!1,lastUpdated:null,error:null},{});treatmentsState=c({isLoaded:!1,lastUpdated:null,error:null},{});userState=c({isLoaded:!1,lastUpdated:null,error:null},{});_risks=[];_objectives=[];_criticalAssets=[];_treatments=[];_user=null;get risks(){return this._risks}get objectives(){return this._objectives}get criticalAssets(){return this._criticalAssets}get treatments(){return this._treatments}get user(){return this._user}get isInitialized(){return this.cacheState().isInitialized}get lastUpdated(){return this.cacheState().lastUpdated}get risksLoaded(){return this.risksState().isLoaded}get objectivesLoaded(){return this.objectivesState().isLoaded}get criticalAssetsLoaded(){return this.criticalAssetsState().isLoaded}get treatmentsLoaded(){return this.treatmentsState().isLoaded}get userLoaded(){return this.userState().isLoaded}async initializeCache(){if(this.cacheState().isInitialized){this.logger.debugLog("Cache already initialized, skipping initialization");return}this.logger.debugLog("Starting cache initialization");try{this._user=await this.loadUser(),this.userState.set({isLoaded:!0,lastUpdated:new Date,error:null}),this.logger.debugLog("User loaded",this._user);let[e,t,r,i]=await Promise.all([this.loadRisks(),this.loadObjectives(),this.loadCriticalAssets(),this.loadTreatments()]);this._risks=e,this.risksState.set({isLoaded:!0,lastUpdated:new Date,error:null}),this._objectives=t,this.objectivesState.set({isLoaded:!0,lastUpdated:new Date,error:null}),this._criticalAssets=r,this.criticalAssetsState.set({isLoaded:!0,lastUpdated:new Date,error:null}),this._treatments=i,this.treatmentsState.set({isLoaded:!0,lastUpdated:new Date,error:null}),this.cacheState.set({isInitialized:!0,lastUpdated:new Date,initializationError:null}),this.logger.debugLog("Cache initialization completed successfully",{risksCount:e.length,objectivesCount:t.length,criticalAssetsCount:r.length,treatmentsCount:i.length})}catch(e){let t=e instanceof Error?e.message:"Unknown error";throw this.cacheState.set({isInitialized:!1,lastUpdated:null,initializationError:t}),this.logger.debugLog("Cache initialization failed",e),e}}async forceRefreshCache(){this.logger.debugLog("Force refreshing entire cache"),this.cacheState.set({isInitialized:!1,lastUpdated:null,initializationError:null}),await this.initializeCache()}async invalidateUser(){this.logger.debugLog("Invalidating user cache");try{this._user=await this.loadUser(),this.userState.set({isLoaded:!0,lastUpdated:new Date,error:null}),this.logger.debugLog("User cache refreshed",this._user)}catch(e){let t=e instanceof Error?e.message:"Unknown error";throw this.userState.set({isLoaded:!1,lastUpdated:null,error:t}),this.logger.debugLog("User cache refresh failed",e),e}}async invalidateRisks(){this.logger.debugLog("Invalidating risks cache");try{this._risks=await this.loadRisks(),this.risksState.set({isLoaded:!0,lastUpdated:new Date,error:null}),this.logger.debugLog("Risks cache refreshed",{count:this._risks.length})}catch(e){let t=e instanceof Error?e.message:"Unknown error";throw this.risksState.set({isLoaded:!1,lastUpdated:null,error:t}),this.logger.debugLog("Risks cache refresh failed",e),e}}async invalidateObjectives(){this.logger.debugLog("Invalidating objectives cache");try{this._objectives=await this.loadObjectives(),this.objectivesState.set({isLoaded:!0,lastUpdated:new Date,error:null}),this.logger.debugLog("Objectives cache refreshed",{count:this._objectives.length})}catch(e){let t=e instanceof Error?e.message:"Unknown error";throw this.objectivesState.set({isLoaded:!1,lastUpdated:null,error:t}),this.logger.debugLog("Objectives cache refresh failed",e),e}}async invalidateCriticalAssets(){this.logger.debugLog("Invalidating critical assets cache");try{this._criticalAssets=await this.loadCriticalAssets(),this.criticalAssetsState.set({isLoaded:!0,lastUpdated:new Date,error:null}),this.logger.debugLog("Critical assets cache refreshed",{count:this._criticalAssets.length})}catch(e){let t=e instanceof Error?e.message:"Unknown error";throw this.criticalAssetsState.set({isLoaded:!1,lastUpdated:null,error:t}),this.logger.debugLog("Critical assets cache refresh failed",e),e}}async invalidateTreatments(){this.logger.debugLog("Invalidating treatments cache");try{this._treatments=await this.loadTreatments(),this.treatmentsState.set({isLoaded:!0,lastUpdated:new Date,error:null}),this.logger.debugLog("Treatments cache refreshed",{count:this._treatments.length})}catch(e){let t=e instanceof Error?e.message:"Unknown error";throw this.treatmentsState.set({isLoaded:!1,lastUpdated:null,error:t}),this.logger.debugLog("Treatments cache refresh failed",e),e}}clearCache(){this.logger.debugLog("Clearing cache"),this._risks=[],this._objectives=[],this._criticalAssets=[],this._treatments=[],this._user=null,this.cacheState.set({isInitialized:!1,lastUpdated:null,initializationError:null}),this.risksState.set({isLoaded:!1,lastUpdated:null,error:null}),this.objectivesState.set({isLoaded:!1,lastUpdated:null,error:null}),this.criticalAssetsState.set({isLoaded:!1,lastUpdated:null,error:null}),this.treatmentsState.set({isLoaded:!1,lastUpdated:null,error:null}),this.userState.set({isLoaded:!1,lastUpdated:null,error:null})}buildApiUrl(e){return`${this.config.siteUrl}${this.config.apiPath}${e}`}getHeaders(e=!1){let t={Accept:"application/json;odata=verbose","Content-Type":"application/json;odata=verbose"};if(e){let r=this.getRequestDigest();r&&(t["X-RequestDigest"]=r)}return t}getRequestDigest(){let e=document.querySelector("#__REQUESTDIGEST");return e?e.value:null}async queryList(e,t,r,i){this.logger.debugLog(`Querying SharePoint list: ${e}`,{select:t,filter:r,orderBy:i});let n=`/lists/${e}/items`,s=[];t&&s.push(`$select=${t}`),r&&s.push(`$filter=${r}`),i&&s.push(`$orderby=${i}`),s.length>0&&(n+="?"+s.join("&"));let d=this.buildApiUrl(n);try{let g=await fetch(d,{method:"GET",headers:this.getHeaders(),credentials:"include"});if(!g.ok)throw new Error(`SharePoint query failed: ${g.status} ${g.statusText}`);return(await g.json()).d.results||[]}catch(g){throw this.logger.debugLog(`Error querying list ${e}`,g),g}}async addListItem(e,t){this.logger.debugLog(`Adding item to SharePoint list: ${e}`,t);let r=`/lists/${e}/items`,i=this.buildApiUrl(r),n=o({__metadata:{type:`SP.Data.${e}ListItem`}},t);try{let s=await fetch(i,{method:"POST",headers:this.getHeaders(!0),credentials:"include",body:JSON.stringify(n)});if(!s.ok)throw new Error(`SharePoint add failed: ${s.status} ${s.statusText}`);let d=await s.json();return this.logger.debugLog(`Item added successfully to ${e}`,d.d),d.d}catch(s){throw this.logger.debugLog(`Error adding item to ${e}`,s),s}}async updateListItem(e,t,r){this.logger.debugLog(`Updating item in SharePoint list: ${e}`,{itemId:t,itemData:r});let i=`/lists/${e}/items(${t})`,n=this.buildApiUrl(i),s=o({__metadata:{type:`SP.Data.${e}ListItem`}},r);try{let d=await fetch(n,{method:"POST",headers:L(o({},this.getHeaders(!0)),{"X-HTTP-Method":"MERGE","IF-MATCH":"*"}),credentials:"include",body:JSON.stringify(s)});if(!d.ok)throw new Error(`SharePoint update failed: ${d.status} ${d.statusText}`);this.logger.debugLog(`Item updated successfully in ${e}`,{itemId:t})}catch(d){throw this.logger.debugLog(`Error updating item in ${e}`,d),d}}async deleteListItem(e,t){this.logger.debugLog(`Deleting item from SharePoint list: ${e}`,{itemId:t});let r=`/lists/${e}/items(${t})`,i=this.buildApiUrl(r);try{let n=await fetch(i,{method:"POST",headers:L(o({},this.getHeaders(!0)),{"X-HTTP-Method":"DELETE","IF-MATCH":"*"}),credentials:"include"});if(!n.ok)throw new Error(`SharePoint delete failed: ${n.status} ${n.statusText}`);this.logger.debugLog(`Item deleted successfully from ${e}`,{itemId:t})}catch(n){throw this.logger.debugLog(`Error deleting item from ${e}`,n),n}}async loadUser(){this.logger.debugLog("Loading current user");let e=this.buildApiUrl("/currentuser");try{let t=await fetch(e,{method:"GET",headers:this.getHeaders(),credentials:"include"});if(!t.ok)throw new Error(`Failed to load user: ${t.status}`);return(await t.json()).d}catch(t){throw this.logger.debugLog("Error loading user",t),t}}async loadRisks(){let e=await this.queryList("RisksList");return this.logger.debugLog("Raw JSON response from RisksList",e),e}async loadObjectives(){let e=await this.queryList("ObjectivesList");return this.logger.debugLog("Raw JSON response from ObjectivesList",e),e}async loadCriticalAssets(){let e=await this.queryList("CriticalAssetsList");return this.logger.debugLog("Raw JSON response from CriticalAssetsList",e),e}async loadTreatments(){let e=await this.queryList("TreatmentsList");return this.logger.debugLog("Raw JSON response from TreatmentsList",e),e}async addRisk(e){let t=await this.addListItem("RisksList",e);return this._risks.push(t),this.logger.debugLog("Risk added to cache",t),t}async updateRisk(e,t){await this.updateListItem("RisksList",e,t);let r=this._risks.findIndex(i=>i.Id===e);r!==-1&&(this._risks[r]=o(o({},this._risks[r]),t),this.logger.debugLog("Risk updated in cache",{riskId:e}))}async deleteRisk(e){await this.deleteListItem("RisksList",e),this._risks=this._risks.filter(t=>t.Id!==e),this.logger.debugLog("Risk deleted from cache",{riskId:e})}async addObjective(e){let t=await this.addListItem("ObjectivesList",e);return this._objectives.push(t),this.logger.debugLog("Objective added to cache",t),t}async updateObjective(e,t){await this.updateListItem("ObjectivesList",e,t);let r=this._objectives.findIndex(i=>i.Id===e);r!==-1&&(this._objectives[r]=o(o({},this._objectives[r]),t),this.logger.debugLog("Objective updated in cache",{objectiveId:e}))}async deleteObjective(e){await this.deleteListItem("ObjectivesList",e),this._objectives=this._objectives.filter(t=>t.Id!==e),this.logger.debugLog("Objective deleted from cache",{objectiveId:e})}async addCriticalAsset(e){let t=await this.addListItem("CriticalAssetsList",e);return this._criticalAssets.push(t),this.logger.debugLog("Critical asset added to cache",t),t}async updateCriticalAsset(e,t){await this.updateListItem("CriticalAssetsList",e,t);let r=this._criticalAssets.findIndex(i=>i.Id===e);r!==-1&&(this._criticalAssets[r]=o(o({},this._criticalAssets[r]),t),this.logger.debugLog("Critical asset updated in cache",{assetId:e}))}async deleteCriticalAsset(e){await this.deleteListItem("CriticalAssetsList",e),this._criticalAssets=this._criticalAssets.filter(t=>t.Id!==e),this.logger.debugLog("Critical asset deleted from cache",{assetId:e})}async addTreatment(e){let t=await this.addListItem("TreatmentsList",e);return this._treatments.push(t),this.logger.debugLog("Treatment added to cache",t),t}async updateTreatment(e,t){await this.updateListItem("TreatmentsList",e,t);let r=this._treatments.findIndex(i=>i.Id===e);r!==-1&&(this._treatments[r]=o(o({},this._treatments[r]),t),this.logger.debugLog("Treatment updated in cache",{treatmentId:e}))}async deleteTreatment(e){await this.deleteListItem("TreatmentsList",e),this._treatments=this._treatments.filter(t=>t.Id!==e),this.logger.debugLog("Treatment deleted from cache",{treatmentId:e})}static \u0275fac=function(t){return new(t||a)(R(_))};static \u0275prov=C({token:a,factory:a.\u0275fac,providedIn:"root"})};function Z(a,e){a&1&&u(0,"div",2)}var Q=new U("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");var V=(()=>{class a{_elementRef=l(I);_ngZone=l(j);_changeDetectorRef=l(B);_renderer=l(D);_cleanupTransitionEnd;constructor(){let t=H(),r=l(Q,{optional:!0});this._isNoopAnimation=t==="di-disabled",t==="reduced-motion"&&this._elementRef.nativeElement.classList.add("mat-progress-bar-reduced-motion"),r&&(r.color&&(this.color=this._defaultColor=r.color),this.mode=r.mode||this.mode)}_isNoopAnimation;get color(){return this._color||this._defaultColor}set color(t){this._color=t}_color;_defaultColor="primary";get value(){return this._value}set value(t){this._value=N(t||0),this._changeDetectorRef.markForCheck()}_value=0;get bufferValue(){return this._bufferValue||0}set bufferValue(t){this._bufferValue=N(t||0),this._changeDetectorRef.markForCheck()}_bufferValue=0;animationEnd=new T;get mode(){return this._mode}set mode(t){this._mode=t,this._changeDetectorRef.markForCheck()}_mode="determinate";ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._cleanupTransitionEnd=this._renderer.listen(this._elementRef.nativeElement,"transitionend",this._transitionendHandler)})}ngOnDestroy(){this._cleanupTransitionEnd?.()}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${this.mode==="buffer"?this.bufferValue:100}%`}_isIndeterminate(){return this.mode==="indeterminate"||this.mode==="query"}_transitionendHandler=t=>{this.animationEnd.observers.length===0||!t.target||!t.target.classList.contains("mdc-linear-progress__primary-bar")||(this.mode==="determinate"||this.mode==="buffer")&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))};static \u0275fac=function(r){return new(r||a)};static \u0275cmp=h({type:a,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(r,i){r&2&&(O("aria-valuenow",i._isIndeterminate()?null:i.value)("mode",i.mode),$("mat-"+i.color),x("_mat-animation-noopable",i._isNoopAnimation)("mdc-linear-progress--animation-ready",!i._isNoopAnimation)("mdc-linear-progress--indeterminate",i._isIndeterminate()))},inputs:{color:"color",value:[2,"value","value",A],bufferValue:[2,"bufferValue","bufferValue",A],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],decls:7,vars:5,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(r,i){r&1&&(b(0,"div",0),u(1,"div",1),p(2,Z,1,0,"div",2),v(),b(3,"div",3),u(4,"span",4),v(),b(5,"div",5),u(6,"span",4),v()),r&2&&(m(),k("flex-basis",i._getBufferBarFlexBasis()),m(),f(i.mode==="buffer"?2:-1),m(),k("transform",i._getPrimaryBarTransform()))},styles:[`.mat-mdc-progress-bar{--mat-progress-bar-animation-multiplier: 1;display:block;text-align:start}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}.mat-progress-bar-reduced-motion{--mat-progress-bar-animation-multiplier: 2}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:max(var(--mat-progress-bar-track-height, 4px),var(--mat-progress-bar-active-indicator-height, 4px))}@media(forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:var(--mat-progress-bar-active-indicator-height, 4px)}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}[dir=rtl] .mdc-linear-progress__bar{right:0;transform-origin:center right}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid;border-color:var(--mat-progress-bar-active-indicator-color, var(--mat-sys-primary));border-top-width:var(--mat-progress-bar-active-indicator-height, 4px)}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden;height:var(--mat-progress-bar-track-height, 4px);border-radius:var(--mat-progress-bar-track-shape, var(--mat-sys-corner-none))}.mdc-linear-progress__buffer-dots{background-image:radial-gradient(circle, var(--mat-progress-bar-track-color, var(--mat-sys-surface-variant)) calc(var(--mat-progress-bar-track-height, 4px) / 2), transparent 0);background-repeat:repeat-x;background-size:calc(calc(var(--mat-progress-bar-track-height, 4px) / 2)*5);background-position:left;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering calc(250ms*var(--mat-progress-bar-animation-multiplier)) infinite linear}@media(forced-colors: active){.mdc-linear-progress__buffer-dots{background-color:ButtonBorder}}[dir=rtl] .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse calc(250ms*var(--mat-progress-bar-animation-multiplier)) infinite linear;transform:rotate(0)}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);background-color:var(--mat-progress-bar-track-color, var(--mat-sys-surface-variant))}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate calc(2s*var(--mat-progress-bar-animation-multiplier)) infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale calc(2s*var(--mat-progress-bar-animation-multiplier)) infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate calc(2s*var(--mat-progress-bar-animation-multiplier)) infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale calc(2s*var(--mat-progress-bar-animation-multiplier)) infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mat-progress-bar-track-height, 4px) * -2.5))}}@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(-83.67142%)}100%{transform:translateX(-200.611057%)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(-37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(-84.386165%)}100%{transform:translateX(-160.277782%)}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}
`],encapsulation:2,changeDetection:0})}return a})();function N(a,e=0,t=100){return Math.max(e,Math.min(t,a))}var G=(()=>{class a{static \u0275fac=function(r){return new(r||a)};static \u0275mod=z({type:a});static \u0275inj=E({imports:[F]})}return a})();function W(a,e){a&1&&M(0,"mat-progress-bar",0)}var J=class a{logger=l(_);dataService=l(y);isLoading=c(!1,{});get risks(){return this.dataService.risks}get objectives(){return this.dataService.objectives}get criticalAssets(){return this.dataService.criticalAssets}get treatments(){return this.dataService.treatments}get user(){return this.dataService.user}get isDataLoaded(){return this.dataService.isInitialized}get risksLoaded(){return this.dataService.risksLoaded}get objectivesLoaded(){return this.dataService.objectivesLoaded}get criticalAssetsLoaded(){return this.dataService.criticalAssetsLoaded}get treatmentsLoaded(){return this.dataService.treatmentsLoaded}async ngOnInit(){this.logger.debugLog("Risk Register component initialized"),this.logger.debugLog("Loading risk data...",{timestamp:new Date}),this.isLoading.set(!0);try{await this.dataService.initializeCache(),this.logger.debugLog("Data cache initialized successfully",{risksCount:this.risks.length,objectivesCount:this.objectives.length,criticalAssetsCount:this.criticalAssets.length,treatmentsCount:this.treatments.length})}catch(e){this.logger.debugLog("Failed to initialize data cache",e)}finally{this.isLoading.set(!1)}}ngOnDestroy(){this.logger.debugLog("Risk Register component destroyed")}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=h({type:a,selectors:[["app-risk-register"]],decls:5,vars:2,consts:[["mode","indeterminate"]],template:function(t,r){t&1&&(p(0,W,1,0,"mat-progress-bar",0),S(1,"p"),P(2,"risk-register works!"),w(),S(3,"p"),P(4),w()),t&2&&(f(r.isLoading()?0:-1),m(4),X("Loaded ",r.risks.length," risks"))},dependencies:[G,V],encapsulation:2})};export{J as RiskRegister};
