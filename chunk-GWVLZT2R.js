import{O as U,Q as G,R as y,d as w,e as N,ea as J,ga as W,h as $,ha as q,i as F,ia as K,j,ja as Q,k as H,ka as V,l as z,la as X,ma as O,na as Y,oa as Z,s as h,t as M}from"./chunk-56D2YMQH.js";import{$a as _,Hb as C,Ib as m,Oa as l,Ub as T,Wb as a,Xb as c,Y as s,cc as L,dc as R,ec as A,na as b,ob as g,pb as p,rb as v,sb as x,tb as I,ub as i,vb as n,wb as D,x as B}from"./chunk-U2ZM34TF.js";var ae=(o,t)=>t.timestamp;function re(o,t){o&1&&(i(0,"p",1),a(1,"No debug logs yet"),n())}function le(o,t){if(o&1&&(i(0,"pre",9),a(1),L(2,"json"),n()),o&2){let e=m().$implicit;l(),c(R(2,1,e.data))}}function se(o,t){if(o&1&&(i(0,"div",6)(1,"span",7),a(2),L(3,"date"),n(),i(4,"span",8),a(5),n(),g(6,le,3,3,"pre",9),n()),o&2){let e=t.$implicit;l(2),c(A(3,3,e.timestamp,"HH:mm:ss.SSS")),l(3),c(e.message),l(),p(e.data?6:-1)}}function ce(o,t){if(o&1&&(i(0,"div",2),v(1,se,7,6,"div",6,ae),n()),o&2){let e=m();l(),x(e.logger.logs())}}var P=class o{logger=s(O);dialogRef=s(J);clearLogs(){this.logger.clearLogs()}close(){this.dialogRef.close()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=_({type:o,selectors:[["app-logger-dialog"]],decls:14,vars:1,consts:[["mat-dialog-title",""],[1,"no-logs"],[1,"log-entries"],["align","end"],["mat-button","",3,"click"],["mat-button","","mat-dialog-close",""],[1,"log-entry"],[1,"log-timestamp"],[1,"log-message"],[1,"log-data"]],template:function(e,r){e&1&&(i(0,"h2",0)(1,"mat-icon"),a(2,"code"),n(),a(3,` Debug Log
`),n(),i(4,"mat-dialog-content"),g(5,re,2,0,"p",1)(6,ce,3,0,"div",2),n(),i(7,"mat-dialog-actions",3)(8,"button",4),C("click",function(){return r.clearLogs()}),i(9,"mat-icon"),a(10,"delete"),n(),a(11," Clear Logs "),n(),i(12,"button",5),a(13,"Close"),n()()),e&2&&(l(5),p(r.logger.logs().length===0?5:6))},dependencies:[X,q,K,V,Q,y,G,M,h,w,N],styles:["h2[mat-dialog-title][_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}mat-dialog-content[_ngcontent-%COMP%]{min-height:300px;max-height:60vh}.no-logs[_ngcontent-%COMP%]{text-align:center;color:var(--mat-sys-on-surface-variant);padding:48px 16px;font-size:16px}.log-entries[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1px}.log-entry[_ngcontent-%COMP%]{padding:12px;background-color:var(--mat-sys-surface-container-low);font-family:Courier New,Consolas,monospace;font-size:13px;border-radius:4px}.log-timestamp[_ngcontent-%COMP%]{color:var(--mat-sys-primary);margin-right:12px;font-weight:600}.log-message[_ngcontent-%COMP%]{color:var(--mat-sys-on-surface)}.log-data[_ngcontent-%COMP%]{margin:8px 0 0;padding:12px;background-color:var(--mat-sys-surface-container);border-radius:4px;overflow-x:auto;font-size:12px;color:var(--mat-sys-on-surface-variant);border-left:3px solid var(--mat-sys-primary)}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}"]})};var me=(o,t)=>t.url;function ge(o,t){if(o&1&&(i(0,"a",6),a(1),n(),i(2,"span",7),a(3,"/"),n()),o&2){let e=m().$implicit;I("routerLink",e.url),l(),c(e.label)}}function pe(o,t){if(o&1&&(i(0,"span",5),a(1),n()),o&2){let e=m().$implicit;l(),c(e.label)}}function de(o,t){if(o&1&&g(0,ge,4,2)(1,pe,2,1,"span",5),o&2){let e=t.$index,r=t.$count;p(e!==r-1?0:1)}}var ee=class o{title=b("erm-sharepoint",{});breadcrumbs=b([],{});isLoggerOpen=b(!1,{});router=s(H);activatedRoute=s(F);dialog=s(W);logger=s(O);ngOnInit(){this.updateBreadcrumbs(),this.router.events.pipe(B(t=>t instanceof $)).subscribe(()=>{this.updateBreadcrumbs()})}toggleLoggerDialog(){if(this.isLoggerOpen())this.dialog.closeAll(),this.isLoggerOpen.set(!1);else{let t=this.dialog.open(P,{width:"70vw",height:"80vh",maxWidth:"90vw",maxHeight:"90vh",disableClose:!1,hasBackdrop:!0,backdropClass:"logger-dark-backdrop",panelClass:"logger-dialog-panel"});this.isLoggerOpen.set(!0),t.afterClosed().subscribe(()=>{this.isLoggerOpen.set(!1)})}}refreshBreadcrumbs(){this.updateBreadcrumbs()}updateBreadcrumbs(){let t=this.createBreadcrumbs(this.activatedRoute.root);t.length>0&&t[0].label!=="Home"&&t.unshift({label:"Home",url:"/"}),this.breadcrumbs.set(t)}createBreadcrumbs(t,e="",r=[]){let d=t.children;if(d.length===0)return r;for(let u of d){let k=u.snapshot.url.map(E=>E.path).join("/");k!==""&&(e+=`/${k}`);let S=u.snapshot.data.breadcrumb;if(S){if(u.snapshot.paramMap.has("id")){let f=e.substring(0,e.lastIndexOf("/"));f.includes("risk-register")?r.push({label:"Risk Register",url:f}):f.includes("objectives")&&r.push({label:"Objectives",url:f})}r.push({label:S,url:e})}return this.createBreadcrumbs(u,e,r)}return r}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=_({type:o,selectors:[["app-root"]],decls:14,vars:2,consts:[[1,"mat-toolbar"],["mat-icon-button","","aria-label","Example icon-button with menu icon",1,"example-icon"],[1,"top-toolbar-spacer"],["mat-icon-button","","aria-label","Toggle debug logger",1,"example-icon",3,"click"],[1,"breadcrumb"],[1,"current"],[3,"routerLink"],[1,"separator"]],template:function(e,r){e&1&&(i(0,"mat-toolbar",0)(1,"button",1)(2,"mat-icon"),a(3,"menu"),n()(),i(4,"span"),a(5,"Governance, Risk & Compliance"),n(),D(6,"span",2),i(7,"button",3),C("click",function(){return r.toggleLoggerDialog()}),i(8,"mat-icon"),a(9,"code"),n()()(),i(10,"nav",4),v(11,de,2,1,null,null,me),n(),D(13,"router-outlet")),e&2&&(l(7),T("active",r.isLoggerOpen()),l(4),x(r.breadcrumbs()))},dependencies:[j,z,M,h,y,U,Z,Y],styles:[".top-toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}mat-toolbar[_ngcontent-%COMP%]{background-color:var(--mat-sys-primary);color:var(--mat-sys-on-primary)}mat-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--mat-sys-on-primary)}mat-toolbar[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#ffffff1a}.breadcrumb[_ngcontent-%COMP%]{padding:12px 16px;background-color:var(--mat-sys-surface-container);display:flex;align-items:center;gap:8px;font-size:14px}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--mat-sys-primary);text-decoration:none}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.breadcrumb[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{color:var(--mat-sys-on-surface-variant)}.breadcrumb[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]{color:var(--mat-sys-on-surface);font-weight:500}"]})};export{ee as a};
