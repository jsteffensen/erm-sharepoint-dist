import{$ as X,H as z,I as U,J as h,T as J,U as W,V as q,W as G,X as K,Y as Q,Z as V,_ as y,aa as Y,c as A,d as w,g as N,h as $,i as F,j as H,k as j,q as C,r as M}from"./chunk-RHDHBQUS.js";import{$b as D,Fb as x,Gb as m,Ma as l,Sb as I,Ub as a,Vb as c,X as s,Za as b,ac as T,bc as R,la as f,mb as g,nb as p,pb as _,qb as v,rb as B,sb as i,tb as n,ub as P,x as k}from"./chunk-SS5N72UV.js";var ae=(o,t)=>t.timestamp;function re(o,t){o&1&&(i(0,"p",1),a(1,"No debug logs yet"),n())}function le(o,t){if(o&1&&(i(0,"pre",9),a(1),D(2,"json"),n()),o&2){let e=m().$implicit;l(),c(T(2,1,e.data))}}function se(o,t){if(o&1&&(i(0,"div",6)(1,"span",7),a(2),D(3,"date"),n(),i(4,"span",8),a(5),n(),g(6,le,3,3,"pre",9),n()),o&2){let e=t.$implicit;l(2),c(R(3,3,e.timestamp,"HH:mm:ss.SSS")),l(3),c(e.message),l(),p(e.data?6:-1)}}function ce(o,t){if(o&1&&(i(0,"div",2),_(1,se,7,6,"div",6,ae),n()),o&2){let e=m();l(),v(e.logger.logs())}}var O=class o{logger=s(y);dialogRef=s(J);clearLogs(){this.logger.clearLogs()}close(){this.dialogRef.close()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=b({type:o,selectors:[["app-logger-dialog"]],decls:14,vars:1,consts:[["mat-dialog-title",""],[1,"no-logs"],[1,"log-entries"],["align","end"],["mat-button","",3,"click"],["mat-button","","mat-dialog-close",""],[1,"log-entry"],[1,"log-timestamp"],[1,"log-message"],[1,"log-data"]],template:function(e,r){e&1&&(i(0,"h2",0)(1,"mat-icon"),a(2,"code"),n(),a(3,` Debug Log
`),n(),i(4,"mat-dialog-content"),g(5,re,2,0,"p",1)(6,ce,3,0,"div",2),n(),i(7,"mat-dialog-actions",3)(8,"button",4),x("click",function(){return r.clearLogs()}),i(9,"mat-icon"),a(10,"delete"),n(),a(11," Clear Logs "),n(),i(12,"button",5),a(13,"Close"),n()()),e&2&&(l(5),p(r.logger.logs().length===0?5:6))},dependencies:[V,q,G,Q,K,h,U,M,C,A,w],styles:["h2[mat-dialog-title][_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}mat-dialog-content[_ngcontent-%COMP%]{min-height:300px;max-height:60vh}.no-logs[_ngcontent-%COMP%]{text-align:center;color:var(--mat-sys-on-surface-variant);padding:48px 16px;font-size:16px}.log-entries[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1px}.log-entry[_ngcontent-%COMP%]{padding:12px;background-color:var(--mat-sys-surface-container-low);font-family:Courier New,Consolas,monospace;font-size:13px;border-radius:4px}.log-timestamp[_ngcontent-%COMP%]{color:var(--mat-sys-primary);margin-right:12px;font-weight:600}.log-message[_ngcontent-%COMP%]{color:var(--mat-sys-on-surface)}.log-data[_ngcontent-%COMP%]{margin:8px 0 0;padding:12px;background-color:var(--mat-sys-surface-container);border-radius:4px;overflow-x:auto;font-size:12px;color:var(--mat-sys-on-surface-variant);border-left:3px solid var(--mat-sys-primary)}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}"]})};var me=(o,t)=>t.url;function ge(o,t){if(o&1&&(i(0,"a",6),a(1),n(),i(2,"span",7),a(3,"/"),n()),o&2){let e=m().$implicit;B("routerLink",e.url),l(),c(e.label)}}function pe(o,t){if(o&1&&(i(0,"span",5),a(1),n()),o&2){let e=m().$implicit;l(),c(e.label)}}function de(o,t){if(o&1&&g(0,ge,4,2)(1,pe,2,1,"span",5),o&2){let e=t.$index,r=t.$count;p(e!==r-1?0:1)}}var Z=class o{title=f("erm-sharepoint",{});breadcrumbs=f([],{});isLoggerOpen=f(!1,{});router=s(H);activatedRoute=s($);dialog=s(W);logger=s(y);ngOnInit(){this.updateBreadcrumbs(),this.router.events.pipe(k(t=>t instanceof N)).subscribe(()=>{this.updateBreadcrumbs()})}toggleLoggerDialog(){if(this.isLoggerOpen())this.dialog.closeAll(),this.isLoggerOpen.set(!1);else{let t=this.dialog.open(O,{width:"70vw",height:"80vh",maxWidth:"90vw",maxHeight:"90vh",disableClose:!1,hasBackdrop:!0,backdropClass:"logger-dark-backdrop",panelClass:"logger-dialog-panel"});this.isLoggerOpen.set(!0),t.afterClosed().subscribe(()=>{this.isLoggerOpen.set(!1)})}}refreshBreadcrumbs(){this.updateBreadcrumbs()}updateBreadcrumbs(){let t=this.createBreadcrumbs(this.activatedRoute.root);t.length>0&&t[0].label!=="Home"&&t.unshift({label:"Home",url:"/"}),this.breadcrumbs.set(t)}createBreadcrumbs(t,e="",r=[]){let d=t.children;if(d.length===0)return r;for(let u of d){let L=u.snapshot.url.map(S=>S.path).join("/");L!==""&&(e+=`/${L}`);let E=u.snapshot.data.breadcrumb;if(E){if(u.snapshot.paramMap.has("id")){let ee=e.substring(0,e.lastIndexOf("/"));r.push({label:"Risk Register",url:ee})}r.push({label:E,url:e})}return this.createBreadcrumbs(u,e,r)}return r}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=b({type:o,selectors:[["app-root"]],decls:14,vars:2,consts:[[1,"mat-toolbar"],["mat-icon-button","","aria-label","Example icon-button with menu icon",1,"example-icon"],[1,"top-toolbar-spacer"],["mat-icon-button","","aria-label","Toggle debug logger",1,"example-icon",3,"click"],[1,"breadcrumb"],[1,"current"],[3,"routerLink"],[1,"separator"]],template:function(e,r){e&1&&(i(0,"mat-toolbar",0)(1,"button",1)(2,"mat-icon"),a(3,"menu"),n()(),i(4,"span"),a(5,"Enterprise Risk Management"),n(),P(6,"span",2),i(7,"button",3),x("click",function(){return r.toggleLoggerDialog()}),i(8,"mat-icon"),a(9,"code"),n()()(),i(10,"nav",4),_(11,de,2,1,null,null,me),n(),P(13,"router-outlet")),e&2&&(l(7),I("active",r.isLoggerOpen()),l(4),v(r.breadcrumbs()))},dependencies:[F,j,M,C,h,z,Y,X],styles:[".top-toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}mat-toolbar[_ngcontent-%COMP%]{background-color:var(--mat-sys-primary);color:var(--mat-sys-on-primary)}mat-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--mat-sys-on-primary)}mat-toolbar[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#ffffff1a}.breadcrumb[_ngcontent-%COMP%]{padding:12px 16px;background-color:var(--mat-sys-surface-container);display:flex;align-items:center;gap:8px;font-size:14px}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--mat-sys-primary);text-decoration:none}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.breadcrumb[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{color:var(--mat-sys-on-surface-variant)}.breadcrumb[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]{color:var(--mat-sys-on-surface);font-weight:500}"]})};export{Z as a};
